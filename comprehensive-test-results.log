[34mğŸ” Running type checking...[0m
pnpm run test:types

> sparka-ai@0.1.0 test:types /Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues
> next typegen . && tsc --noEmit

Generating route types...
âœ“ Route types generated successfully
[34mğŸ”¬ Running unit tests...[0m
pnpm run test:unit

> sparka-ai@0.1.0 test:unit /Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues
> vitest run --config vitest.config.ts


 RUN  v3.2.4 /Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues

 âœ“ tests/unit/api/chat.test.ts (14 tests) 25ms
 âœ“ lib/ai/text-splitter.test.ts (4 tests) 8ms
 âœ“ lib/ai/tools/file-search.test.ts (5 tests) 6ms
 âœ“ lib/ai/token-utils.test.ts (19 tests) 13ms
 âœ“ tests/unit/api/auth.test.ts (19 tests) 643ms
   âœ“ Authentication API > User Login > verifies password correctly  368ms

 Test Files  5 passed (5)
      Tests  61 passed (61)
   Start at  23:35:57
   Duration  1.42s (transform 311ms, setup 159ms, collect 1.24s, tests 694ms, environment 1ms, prepare 554ms)

[34mğŸ§ª Running all tests...[0m
pnpm run test

> sparka-ai@0.1.0 test /Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues
> export PLAYWRIGHT=True && npx playwright test --workers=4

ğŸ”§ Setting up test environment...
ğŸ›‘ Stopping any existing test containers...
ğŸ³ Starting test database container...
 Network remove-all-test-issues_default  Creating
 Network remove-all-test-issues_default  Created
 Volume "remove-all-test-issues_postgres_test_data"  Creating
 Volume "remove-all-test-issues_postgres_test_data"  Created
 Container postgres-test-db  Creating
 Container postgres-test-db  Created
 Container postgres-test-db  Starting
 Container postgres-test-db  Started
â³ Waiting for database to be ready...
â³ Database not ready (attempt 1/20), retrying in 1000ms...
   Error: Command failed: docker compose -f docker-compose.test.yml exec -T postgres-test pg_isready -U test_user -d test_db -h localhost

âœ… Database is ready after 2 attempts
âœ… Test environment setup completed

Running 20 tests using 4 workers

[1A[2K[1/20] [setup:auth] â€º tests/auth.setup.ts:6:6 â€º authenticate
[1A[2K[2/20] [setup:reasoning] â€º tests/reasoning.setup.ts:10:6 â€º switch to reasoning model
[1A[2K[3/20] [chat] â€º tests/chat.test.ts:29:7 â€º chat activity â€º send a user message from suggestion
[1A[2K[4/20] [chat] â€º tests/chat.test.ts:12:7 â€º chat activity â€º send a user message and receive response
[1A[2K[5/20] [chat] â€º tests/chat.test.ts:20:7 â€º chat activity â€º redirect to /chat/:id after submitting message
[1A[2K[chat] â€º tests/chat.test.ts:12:7 â€º chat activity â€º send a user message and receive response
â³ Connecting to test database...

[1A[2K[chat] â€º tests/chat.test.ts:20:7 â€º chat activity â€º redirect to /chat/:id after submitting message
â³ Connecting to test database...

[1A[2K[chat] â€º tests/chat.test.ts:29:7 â€º chat activity â€º send a user message from suggestion
â³ Connecting to test database...

[1A[2K[chat] â€º tests/chat.test.ts:20:7 â€º chat activity â€º redirect to /chat/:id after submitting message
â³ Running test database migrations...

[1A[2K[chat] â€º tests/chat.test.ts:29:7 â€º chat activity â€º send a user message from suggestion
â³ Running test database migrations...

[1A[2K[chat] â€º tests/chat.test.ts:12:7 â€º chat activity â€º send a user message and receive response
â³ Running test database migrations...

[1A[2Kâ³ database migration failed (attempt 1/3), retrying in 2000ms...

[1A[2K   Error: duplicate key value violates unique constraint "pg_namespace_nspname_index"

[1A[2K[chat] â€º tests/chat.test.ts:29:7 â€º chat activity â€º send a user message from suggestion
â³ database migration failed (attempt 1/3), retrying in 2000ms...

[1A[2K   Error: duplicate key value violates unique constraint "pg_namespace_nspname_index"

[1A[2K[chat] â€º tests/chat.test.ts:20:7 â€º chat activity â€º redirect to /chat/:id after submitting message
{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42622'[39m,
  message: [32m'identifier "Suggestion_documentId_documentCreatedAt_Document_id_createdAt_fk" will be truncated to "Suggestion_documentId_documentCreatedAt_Document_id_createdAt_f"'[39m,
  where: [32m'compilation of PL/pgSQL function "inline_code_block" near line 1'[39m,
  file: [32m'scansup.c'[39m,
  line: [32m'99'[39m,
  routine: [32m'truncate_identifier'[39m
}

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42622'[39m,
  message: [32m'identifier "Suggestion_documentId_documentCreatedAt_Document_id_createdAt_fk" will be truncated to "Suggestion_documentId_documentCreatedAt_Document_id_createdAt_f"'[39m,
  position: [32m'15'[39m,
  file: [32m'scansup.c'[39m,
  line: [32m'99'[39m,
  routine: [32m'truncate_identifier'[39m
}

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42622'[39m,
  message: [32m'identifier "Suggestion_documentId_documentCreatedAt_Document_id_createdAt_fk" will be truncated to "Suggestion_documentId_documentCreatedAt_Document_id_createdAt_f"'[39m,
  where: [32m'SQL statement "ALTER TABLE "Suggestion" ADD CONSTRAINT "Suggestion_documentId_documentCreatedAt_Document_id_createdAt_fk" FOREIGN KEY ("documentId","documentCreatedAt") REFERENCES "public"."Document"("id","createdAt") ON DELETE no action ON UPDATE no action"\n'[39m +
    [32m'PL/pgSQL function inline_code_block line 2 at SQL statement'[39m,
  file: [32m'scansup.c'[39m,
  line: [32m'99'[39m,
  routine: [32m'truncate_identifier'[39m
}

[1A[2Kâœ… Test migrations completed in 146ms

[1A[2K[chat] â€º tests/chat.test.ts:12:7 â€º chat activity â€º send a user message and receive response
{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P06'[39m,
  message: [32m'schema "drizzle" already exists, skipping'[39m,
  file: [32m'schemacmds.c'[39m,
  line: [32m'132'[39m,
  routine: [32m'CreateSchemaCommand'[39m
}

[1A[2K[chat] â€º tests/chat.test.ts:29:7 â€º chat activity â€º send a user message from suggestion
{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P06'[39m,
  message: [32m'schema "drizzle" already exists, skipping'[39m,
  file: [32m'schemacmds.c'[39m,
  line: [32m'132'[39m,
  routine: [32m'CreateSchemaCommand'[39m
}

[1A[2K[chat] â€º tests/chat.test.ts:12:7 â€º chat activity â€º send a user message and receive response
{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P07'[39m,
  message: [32m'relation "__drizzle_migrations" already exists, skipping'[39m,
  file: [32m'parse_utilcmd.c'[39m,
  line: [32m'207'[39m,
  routine: [32m'transformCreateStmt'[39m
}

[1A[2K[chat] â€º tests/chat.test.ts:29:7 â€º chat activity â€º send a user message from suggestion
{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P07'[39m,
  message: [32m'relation "__drizzle_migrations" already exists, skipping'[39m,
  file: [32m'parse_utilcmd.c'[39m,
  line: [32m'207'[39m,
  routine: [32m'transformCreateStmt'[39m
}

[1A[2Kâœ… Test migrations completed in 2026ms

[1A[2K[chat] â€º tests/chat.test.ts:12:7 â€º chat activity â€º send a user message and receive response
âœ… Test migrations completed in 2027ms

[1A[2K[chat] â€º tests/chat.test.ts:29:7 â€º chat activity â€º send a user message from suggestion
ğŸ¯ Chat API route intercepted: http://localhost:3000/api/chat

[1A[2KğŸ¯ Request method: POST

[1A[2KğŸ¯ Request body: {
  id: [32m'b3bf7623-bcbf-402c-bbe6-3d14e95d043d'[39m,
  message: {
    role: [32m'user'[39m,
    parts: [ [36m[Object][39m ],
    metadata: {
      selectedModel: [32m'openai/gpt-5-mini'[39m,
      createdAt: [32m'2025-09-18T21:36:10.918Z'[39m,
      parentMessageId: [1mnull[22m
    },
    id: [32m'b7755140-fd2b-407b-8ecb-088b4d7888a6'[39m
  },
  prevMessages: [],
  data: {
    deepResearch: [33mfalse[39m,
    webSearch: [33mfalse[39m,
    reason: [33mfalse[39m,
    generateImage: [33mfalse[39m,
    writeOrCode: [33mfalse[39m
  }
}

[1A[2K[6/20] [setup:reasoning] â€º tests/reasoning.setup.ts:10:6 â€º switch to reasoning model (retry #1)
[1A[2K[7/20] [chat] â€º tests/chat.test.ts:12:7 â€º chat activity â€º send a user message and receive response (retry #1)
[1A[2K[8/20] [chat] â€º tests/chat.test.ts:29:7 â€º chat activity â€º send a user message from suggestion (retry #1)
[1A[2K[9/20] [chat] â€º tests/chat.test.ts:20:7 â€º chat activity â€º redirect to /chat/:id after submitting message (retry #1)
[1A[2K[chat] â€º tests/chat.test.ts:12:7 â€º chat activity â€º send a user message and receive response
â³ Connecting to test database...

[1A[2K[chat] â€º tests/chat.test.ts:29:7 â€º chat activity â€º send a user message from suggestion
â³ Connecting to test database...

[1A[2K[chat] â€º tests/chat.test.ts:20:7 â€º chat activity â€º redirect to /chat/:id after submitting message
â³ Connecting to test database...

[1A[2K[chat] â€º tests/chat.test.ts:12:7 â€º chat activity â€º send a user message and receive response
â³ Running test database migrations...

[1A[2K[chat] â€º tests/chat.test.ts:29:7 â€º chat activity â€º send a user message from suggestion
â³ Running test database migrations...

[1A[2K[chat] â€º tests/chat.test.ts:12:7 â€º chat activity â€º send a user message and receive response
{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P06'[39m,
  message: [32m'schema "drizzle" already exists, skipping'[39m,
  file: [32m'schemacmds.c'[39m,
  line: [32m'132'[39m,
  routine: [32m'CreateSchemaCommand'[39m
}

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P07'[39m,
  message: [32m'relation "__drizzle_migrations" already exists, skipping'[39m,
  file: [32m'parse_utilcmd.c'[39m,
  line: [32m'207'[39m,
  routine: [32m'transformCreateStmt'[39m
}

[1A[2K[chat] â€º tests/chat.test.ts:29:7 â€º chat activity â€º send a user message from suggestion
{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P06'[39m,
  message: [32m'schema "drizzle" already exists, skipping'[39m,
  file: [32m'schemacmds.c'[39m,
  line: [32m'132'[39m,
  routine: [32m'CreateSchemaCommand'[39m
}

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P07'[39m,
  message: [32m'relation "__drizzle_migrations" already exists, skipping'[39m,
  file: [32m'parse_utilcmd.c'[39m,
  line: [32m'207'[39m,
  routine: [32m'transformCreateStmt'[39m
}

[1A[2K[chat] â€º tests/chat.test.ts:12:7 â€º chat activity â€º send a user message and receive response
âœ… Test migrations completed in 15ms

[1A[2K[chat] â€º tests/chat.test.ts:29:7 â€º chat activity â€º send a user message from suggestion
âœ… Test migrations completed in 14ms

[1A[2K[chat] â€º tests/chat.test.ts:20:7 â€º chat activity â€º redirect to /chat/:id after submitting message
â³ Running test database migrations...

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P06'[39m,
  message: [32m'schema "drizzle" already exists, skipping'[39m,
  file: [32m'schemacmds.c'[39m,
  line: [32m'132'[39m,
  routine: [32m'CreateSchemaCommand'[39m
}

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P07'[39m,
  message: [32m'relation "__drizzle_migrations" already exists, skipping'[39m,
  file: [32m'parse_utilcmd.c'[39m,
  line: [32m'207'[39m,
  routine: [32m'transformCreateStmt'[39m
}

[1A[2Kâœ… Test migrations completed in 18ms

[1A[2K[chat] â€º tests/chat.test.ts:29:7 â€º chat activity â€º send a user message from suggestion
ğŸ¯ Chat API route intercepted: http://localhost:3000/api/chat

[1A[2KğŸ¯ Request method: POST

[1A[2KğŸ¯ Request body: {
  id: [32m'ce7891c5-dc0f-4a97-8d02-bc190c518347'[39m,
  message: {
    role: [32m'user'[39m,
    parts: [ [36m[Object][39m ],
    metadata: {
      selectedModel: [32m'openai/gpt-5-mini'[39m,
      createdAt: [32m'2025-09-18T21:37:14.305Z'[39m,
      parentMessageId: [1mnull[22m
    },
    id: [32m'e686b7cc-82db-4a90-b601-5dfdc4b6557b'[39m
  },
  prevMessages: [],
  data: {
    deepResearch: [33mfalse[39m,
    webSearch: [33mfalse[39m,
    reason: [33mfalse[39m,
    generateImage: [33mfalse[39m,
    writeOrCode: [33mfalse[39m
  }
}

[1A[2K  1) [setup:reasoning] â€º tests/reasoning.setup.ts:10:6 â€º switch to reasoning model â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.click: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for getByTestId('model-selector-item-chat-model-reasoning')[22m


       at pages/chat.ts:144

      142 |
      143 |     await this.page.getByTestId('model-selector').click();
    > 144 |     await this.page.getByTestId(`model-selector-item-${chatModelId}`).click();
          |                                                                       ^
      145 |     expect(await this.getSelectedModel()).toBe(chatModel.name);
      146 |   }
      147 |
        at ChatPage.chooseModelFromSelector (/Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/pages/chat.ts:144:71)
        at /Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/reasoning.setup.ts:14:3

    Error Context: test-results/reasoning.setup.ts-switch-to-reasoning-model-setup-reasoning/error-context.md

    Retry #1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.click: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for getByTestId('model-selector-item-chat-model-reasoning')[22m


       at pages/chat.ts:144

      142 |
      143 |     await this.page.getByTestId('model-selector').click();
    > 144 |     await this.page.getByTestId(`model-selector-item-${chatModelId}`).click();
          |                                                                       ^
      145 |     expect(await this.getSelectedModel()).toBe(chatModel.name);
      146 |   }
      147 |
        at ChatPage.chooseModelFromSelector (/Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/pages/chat.ts:144:71)
        at /Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/reasoning.setup.ts:14:3

    Error Context: test-results/reasoning.setup.ts-switch-to-reasoning-model-setup-reasoning-retry1/error-context.md

    attachment #2: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/reasoning.setup.ts-switch-to-reasoning-model-setup-reasoning-retry1/trace.zip
    Usage:

        pnpm exec playwright show-trace test-results/reasoning.setup.ts-switch-to-reasoning-model-setup-reasoning-retry1/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


[1A[2K  2) [chat] â€º tests/chat.test.ts:12:7 â€º chat activity â€º send a user message and receive response â”€â”€â”€

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.click: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for locator('[data-testid="multimodal-input"]').locator('textarea, [contenteditable="true"]').first()[22m


       at pages/chat.ts:32

      30 |     // Find the actual textarea/input inside the multimodal input
      31 |     const textInput = this.page.locator('[data-testid="multimodal-input"]').locator('textarea, [contenteditable="true"]').first();
    > 32 |     await textInput.click();
         |                     ^
      33 |     await textInput.fill(message);
      34 |     
      35 |     // Wait for the button to exist (either send-button or stop-button)
        at ChatPage.sendUserMessage (/Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/pages/chat.ts:32:21)
        at /Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/chat.test.ts:13:20

    Error Context: test-results/chat-chat-activity-send-a-user-message-and-receive-response-chat/error-context.md

    Retry #1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.click: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for locator('[data-testid="multimodal-input"]').locator('textarea, [contenteditable="true"]').first()[22m


       at pages/chat.ts:32

      30 |     // Find the actual textarea/input inside the multimodal input
      31 |     const textInput = this.page.locator('[data-testid="multimodal-input"]').locator('textarea, [contenteditable="true"]').first();
    > 32 |     await textInput.click();
         |                     ^
      33 |     await textInput.fill(message);
      34 |     
      35 |     // Wait for the button to exist (either send-button or stop-button)
        at ChatPage.sendUserMessage (/Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/pages/chat.ts:32:21)
        at /Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/chat.test.ts:13:20

    Error Context: test-results/chat-chat-activity-send-a-user-message-and-receive-response-chat-retry1/error-context.md

    attachment #2: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/chat-chat-activity-send-a-user-message-and-receive-response-chat-retry1/trace.zip
    Usage:

        pnpm exec playwright show-trace test-results/chat-chat-activity-send-a-user-message-and-receive-response-chat-retry1/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


[1A[2K  3) [chat] â€º tests/chat.test.ts:20:7 â€º chat activity â€º redirect to /chat/:id after submitting message 

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.click: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for locator('[data-testid="multimodal-input"]').locator('textarea, [contenteditable="true"]').first()[22m


       at pages/chat.ts:32

      30 |     // Find the actual textarea/input inside the multimodal input
      31 |     const textInput = this.page.locator('[data-testid="multimodal-input"]').locator('textarea, [contenteditable="true"]').first();
    > 32 |     await textInput.click();
         |                     ^
      33 |     await textInput.fill(message);
      34 |     
      35 |     // Wait for the button to exist (either send-button or stop-button)
        at ChatPage.sendUserMessage (/Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/pages/chat.ts:32:21)
        at /Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/chat.test.ts:21:20

    Error Context: test-results/chat-chat-activity-redirec-80477-id-after-submitting-message-chat/error-context.md

    Retry #1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.click: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for locator('[data-testid="multimodal-input"]').locator('textarea, [contenteditable="true"]').first()[22m


       at pages/chat.ts:32

      30 |     // Find the actual textarea/input inside the multimodal input
      31 |     const textInput = this.page.locator('[data-testid="multimodal-input"]').locator('textarea, [contenteditable="true"]').first();
    > 32 |     await textInput.click();
         |                     ^
      33 |     await textInput.fill(message);
      34 |     
      35 |     // Wait for the button to exist (either send-button or stop-button)
        at ChatPage.sendUserMessage (/Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/pages/chat.ts:32:21)
        at /Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/chat.test.ts:21:20

    Error Context: test-results/chat-chat-activity-redirec-80477-id-after-submitting-message-chat-retry1/error-context.md

    attachment #2: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/chat-chat-activity-redirec-80477-id-after-submitting-message-chat-retry1/trace.zip
    Usage:

        pnpm exec playwright show-trace test-results/chat-chat-activity-redirec-80477-id-after-submitting-message-chat-retry1/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


[1A[2K[10/20] [chat] â€º tests/chat.test.ts:39:7 â€º chat activity â€º toggle between send/stop button based on activity
[1A[2K  4) [chat] â€º tests/chat.test.ts:29:7 â€º chat activity â€º send a user message from suggestion â”€â”€â”€â”€â”€â”€â”€â”€

    [31mTest timeout of 60000ms exceeded.[39m

    Error: page.waitForResponse: Test timeout of 60000ms exceeded.

       at pages/chat.ts:56

      54 |   async isGenerationComplete() {
      55 |     // Wait for the API call to start
    > 56 |     await this.page.waitForResponse((response) =>
         |                     ^
      57 |       response.url().includes('/api/chat'),
      58 |     );
      59 |     
        at ChatPage.isGenerationComplete (/Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/pages/chat.ts:56:21)
        at /Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/chat.test.ts:31:20

    Error Context: test-results/chat-chat-activity-send-a-user-message-from-suggestion-chat/error-context.md

    Retry #1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    [31mTest timeout of 60000ms exceeded.[39m

    Error: page.waitForResponse: Test timeout of 60000ms exceeded.

       at pages/chat.ts:56

      54 |   async isGenerationComplete() {
      55 |     // Wait for the API call to start
    > 56 |     await this.page.waitForResponse((response) =>
         |                     ^
      57 |       response.url().includes('/api/chat'),
      58 |     );
      59 |     
        at ChatPage.isGenerationComplete (/Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/pages/chat.ts:56:21)
        at /Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/chat.test.ts:31:20

    Error Context: test-results/chat-chat-activity-send-a-user-message-from-suggestion-chat-retry1/error-context.md

    attachment #2: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/chat-chat-activity-send-a-user-message-from-suggestion-chat-retry1/trace.zip
    Usage:

        pnpm exec playwright show-trace test-results/chat-chat-activity-send-a-user-message-from-suggestion-chat-retry1/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


[1A[2K[chat] â€º tests/chat.test.ts:39:7 â€º chat activity â€º toggle between send/stop button based on activity
â³ Connecting to test database...

[1A[2Kâ³ Running test database migrations...

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P06'[39m,
  message: [32m'schema "drizzle" already exists, skipping'[39m,
  file: [32m'schemacmds.c'[39m,
  line: [32m'132'[39m,
  routine: [32m'CreateSchemaCommand'[39m
}

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P07'[39m,
  message: [32m'relation "__drizzle_migrations" already exists, skipping'[39m,
  file: [32m'parse_utilcmd.c'[39m,
  line: [32m'207'[39m,
  routine: [32m'transformCreateStmt'[39m
}

[1A[2Kâœ… Test migrations completed in 14ms

[1A[2K[11/20] [chat] â€º tests/chat.test.ts:54:7 â€º chat activity â€º stop generation during submission
[1A[2K[12/20] [chat] â€º tests/chat.test.ts:61:7 â€º chat activity â€º edit user message and resubmit
[1A[2K[chat] â€º tests/chat.test.ts:54:7 â€º chat activity â€º stop generation during submission
â³ Connecting to test database...

[1A[2K[chat] â€º tests/chat.test.ts:61:7 â€º chat activity â€º edit user message and resubmit
â³ Connecting to test database...

[1A[2K[chat] â€º tests/chat.test.ts:54:7 â€º chat activity â€º stop generation during submission
â³ Running test database migrations...

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P06'[39m,
  message: [32m'schema "drizzle" already exists, skipping'[39m,
  file: [32m'schemacmds.c'[39m,
  line: [32m'132'[39m,
  routine: [32m'CreateSchemaCommand'[39m
}

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P07'[39m,
  message: [32m'relation "__drizzle_migrations" already exists, skipping'[39m,
  file: [32m'parse_utilcmd.c'[39m,
  line: [32m'207'[39m,
  routine: [32m'transformCreateStmt'[39m
}

[1A[2K[chat] â€º tests/chat.test.ts:61:7 â€º chat activity â€º edit user message and resubmit
â³ Running test database migrations...

[1A[2K[chat] â€º tests/chat.test.ts:54:7 â€º chat activity â€º stop generation during submission
âœ… Test migrations completed in 18ms

[1A[2K[chat] â€º tests/chat.test.ts:61:7 â€º chat activity â€º edit user message and resubmit
{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P06'[39m,
  message: [32m'schema "drizzle" already exists, skipping'[39m,
  file: [32m'schemacmds.c'[39m,
  line: [32m'132'[39m,
  routine: [32m'CreateSchemaCommand'[39m
}

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P07'[39m,
  message: [32m'relation "__drizzle_migrations" already exists, skipping'[39m,
  file: [32m'parse_utilcmd.c'[39m,
  line: [32m'207'[39m,
  routine: [32m'transformCreateStmt'[39m
}

[1A[2Kâœ… Test migrations completed in 15ms

[1A[2K[13/20] [chat] â€º tests/chat.test.ts:77:7 â€º chat activity â€º hide suggested actions after sending message
[1A[2K[chat] â€º tests/chat.test.ts:77:7 â€º chat activity â€º hide suggested actions after sending message
â³ Connecting to test database...

[1A[2Kâ³ Running test database migrations...

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P06'[39m,
  message: [32m'schema "drizzle" already exists, skipping'[39m,
  file: [32m'schemacmds.c'[39m,
  line: [32m'132'[39m,
  routine: [32m'CreateSchemaCommand'[39m
}

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P07'[39m,
  message: [32m'relation "__drizzle_migrations" already exists, skipping'[39m,
  file: [32m'parse_utilcmd.c'[39m,
  line: [32m'207'[39m,
  routine: [32m'transformCreateStmt'[39m
}

[1A[2Kâœ… Test migrations completed in 9ms

[1A[2KğŸ¯ Chat API route intercepted: http://localhost:3000/api/chat

[1A[2KğŸ¯ Request method: POST

[1A[2KğŸ¯ Request body: {
  id: [32m'a6238fb8-e842-403a-b3fb-a96480080875'[39m,
  message: {
    role: [32m'user'[39m,
    parts: [ [36m[Object][39m ],
    metadata: {
      selectedModel: [32m'openai/gpt-5-mini'[39m,
      createdAt: [32m'2025-09-18T21:38:13.747Z'[39m,
      parentMessageId: [1mnull[22m
    },
    id: [32m'afce5678-88f8-4e63-8fc6-54f00d11a8cb'[39m
  },
  prevMessages: [],
  data: {
    deepResearch: [33mfalse[39m,
    webSearch: [33mfalse[39m,
    reason: [33mfalse[39m,
    generateImage: [33mfalse[39m,
    writeOrCode: [33mfalse[39m
  }
}

[1A[2K[14/20] [chat] â€º tests/chat.test.ts:83:7 â€º chat activity â€º upload file and send image attachment with message
[1A[2K[chat] â€º tests/chat.test.ts:83:7 â€º chat activity â€º upload file and send image attachment with message
â³ Connecting to test database...

[1A[2Kâ³ Running test database migrations...

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P06'[39m,
  message: [32m'schema "drizzle" already exists, skipping'[39m,
  file: [32m'schemacmds.c'[39m,
  line: [32m'132'[39m,
  routine: [32m'CreateSchemaCommand'[39m
}

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P07'[39m,
  message: [32m'relation "__drizzle_migrations" already exists, skipping'[39m,
  file: [32m'parse_utilcmd.c'[39m,
  line: [32m'207'[39m,
  routine: [32m'transformCreateStmt'[39m
}

[1A[2Kâœ… Test migrations completed in 5ms

[1A[2K[15/20] [chat] â€º tests/chat.test.ts:39:7 â€º chat activity â€º toggle between send/stop button based on activity (retry #1)
[1A[2K[chat] â€º tests/chat.test.ts:39:7 â€º chat activity â€º toggle between send/stop button based on activity
â³ Connecting to test database...

[1A[2Kâ³ Running test database migrations...

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P06'[39m,
  message: [32m'schema "drizzle" already exists, skipping'[39m,
  file: [32m'schemacmds.c'[39m,
  line: [32m'132'[39m,
  routine: [32m'CreateSchemaCommand'[39m
}

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P07'[39m,
  message: [32m'relation "__drizzle_migrations" already exists, skipping'[39m,
  file: [32m'parse_utilcmd.c'[39m,
  line: [32m'207'[39m,
  routine: [32m'transformCreateStmt'[39m
}

[1A[2Kâœ… Test migrations completed in 12ms

[1A[2K[16/20] [chat] â€º tests/chat.test.ts:54:7 â€º chat activity â€º stop generation during submission (retry #1)
[1A[2K[17/20] [chat] â€º tests/chat.test.ts:61:7 â€º chat activity â€º edit user message and resubmit (retry #1)
[1A[2K[chat] â€º tests/chat.test.ts:54:7 â€º chat activity â€º stop generation during submission
â³ Connecting to test database...

[1A[2K[chat] â€º tests/chat.test.ts:61:7 â€º chat activity â€º edit user message and resubmit
â³ Connecting to test database...

[1A[2K[chat] â€º tests/chat.test.ts:54:7 â€º chat activity â€º stop generation during submission
â³ Running test database migrations...

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P06'[39m,
  message: [32m'schema "drizzle" already exists, skipping'[39m,
  file: [32m'schemacmds.c'[39m,
  line: [32m'132'[39m,
  routine: [32m'CreateSchemaCommand'[39m
}

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P07'[39m,
  message: [32m'relation "__drizzle_migrations" already exists, skipping'[39m,
  file: [32m'parse_utilcmd.c'[39m,
  line: [32m'207'[39m,
  routine: [32m'transformCreateStmt'[39m
}

[1A[2Kâœ… Test migrations completed in 34ms

[1A[2K[chat] â€º tests/chat.test.ts:61:7 â€º chat activity â€º edit user message and resubmit
â³ Running test database migrations...

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P06'[39m,
  message: [32m'schema "drizzle" already exists, skipping'[39m,
  file: [32m'schemacmds.c'[39m,
  line: [32m'132'[39m,
  routine: [32m'CreateSchemaCommand'[39m
}

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P07'[39m,
  message: [32m'relation "__drizzle_migrations" already exists, skipping'[39m,
  file: [32m'parse_utilcmd.c'[39m,
  line: [32m'207'[39m,
  routine: [32m'transformCreateStmt'[39m
}

[1A[2Kâœ… Test migrations completed in 57ms

[1A[2K[18/20] [chat] â€º tests/chat.test.ts:83:7 â€º chat activity â€º upload file and send image attachment with message (retry #1)
[1A[2K[chat] â€º tests/chat.test.ts:83:7 â€º chat activity â€º upload file and send image attachment with message
â³ Connecting to test database...

[1A[2Kâ³ Running test database migrations...

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P06'[39m,
  message: [32m'schema "drizzle" already exists, skipping'[39m,
  file: [32m'schemacmds.c'[39m,
  line: [32m'132'[39m,
  routine: [32m'CreateSchemaCommand'[39m
}

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P07'[39m,
  message: [32m'relation "__drizzle_migrations" already exists, skipping'[39m,
  file: [32m'parse_utilcmd.c'[39m,
  line: [32m'207'[39m,
  routine: [32m'transformCreateStmt'[39m
}

[1A[2Kâœ… Test migrations completed in 19ms

[1A[2K  5) [chat] â€º tests/chat.test.ts:39:7 â€º chat activity â€º toggle between send/stop button based on activity 

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.click: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for locator('[data-testid="multimodal-input"]').locator('textarea, [contenteditable="true"]').first()[22m


       at pages/chat.ts:32

      30 |     // Find the actual textarea/input inside the multimodal input
      31 |     const textInput = this.page.locator('[data-testid="multimodal-input"]').locator('textarea, [contenteditable="true"]').first();
    > 32 |     await textInput.click();
         |                     ^
      33 |     await textInput.fill(message);
      34 |     
      35 |     // Wait for the button to exist (either send-button or stop-button)
        at ChatPage.sendUserMessage (/Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/pages/chat.ts:32:21)
        at /Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/chat.test.ts:43:20

    Error Context: test-results/chat-chat-activity-toggle--278af-op-button-based-on-activity-chat/error-context.md

    Retry #1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.click: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for locator('[data-testid="multimodal-input"]').locator('textarea, [contenteditable="true"]').first()[22m


       at pages/chat.ts:32

      30 |     // Find the actual textarea/input inside the multimodal input
      31 |     const textInput = this.page.locator('[data-testid="multimodal-input"]').locator('textarea, [contenteditable="true"]').first();
    > 32 |     await textInput.click();
         |                     ^
      33 |     await textInput.fill(message);
      34 |     
      35 |     // Wait for the button to exist (either send-button or stop-button)
        at ChatPage.sendUserMessage (/Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/pages/chat.ts:32:21)
        at /Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/chat.test.ts:43:20

    Error Context: test-results/chat-chat-activity-toggle--278af-op-button-based-on-activity-chat-retry1/error-context.md

    attachment #2: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/chat-chat-activity-toggle--278af-op-button-based-on-activity-chat-retry1/trace.zip
    Usage:

        pnpm exec playwright show-trace test-results/chat-chat-activity-toggle--278af-op-button-based-on-activity-chat-retry1/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


[1A[2K[19/20] [chat] â€º tests/chat.test.ts:101:7 â€º chat activity â€º call weather tool
[1A[2K[chat] â€º tests/chat.test.ts:101:7 â€º chat activity â€º call weather tool
â³ Connecting to test database...

[1A[2Kâ³ Running test database migrations...

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P06'[39m,
  message: [32m'schema "drizzle" already exists, skipping'[39m,
  file: [32m'schemacmds.c'[39m,
  line: [32m'132'[39m,
  routine: [32m'CreateSchemaCommand'[39m
}

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P07'[39m,
  message: [32m'relation "__drizzle_migrations" already exists, skipping'[39m,
  file: [32m'parse_utilcmd.c'[39m,
  line: [32m'207'[39m,
  routine: [32m'transformCreateStmt'[39m
}

[1A[2Kâœ… Test migrations completed in 22ms

[1A[2K  6) [chat] â€º tests/chat.test.ts:54:7 â€º chat activity â€º stop generation during submission â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.click: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for locator('[data-testid="multimodal-input"]').locator('textarea, [contenteditable="true"]').first()[22m


       at pages/chat.ts:32

      30 |     // Find the actual textarea/input inside the multimodal input
      31 |     const textInput = this.page.locator('[data-testid="multimodal-input"]').locator('textarea, [contenteditable="true"]').first();
    > 32 |     await textInput.click();
         |                     ^
      33 |     await textInput.fill(message);
      34 |     
      35 |     // Wait for the button to exist (either send-button or stop-button)
        at ChatPage.sendUserMessage (/Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/pages/chat.ts:32:21)
        at /Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/chat.test.ts:55:20

    Error Context: test-results/chat-chat-activity-stop-generation-during-submission-chat/error-context.md

    Retry #1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.click: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for locator('[data-testid="multimodal-input"]').locator('textarea, [contenteditable="true"]').first()[22m


       at pages/chat.ts:32

      30 |     // Find the actual textarea/input inside the multimodal input
      31 |     const textInput = this.page.locator('[data-testid="multimodal-input"]').locator('textarea, [contenteditable="true"]').first();
    > 32 |     await textInput.click();
         |                     ^
      33 |     await textInput.fill(message);
      34 |     
      35 |     // Wait for the button to exist (either send-button or stop-button)
        at ChatPage.sendUserMessage (/Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/pages/chat.ts:32:21)
        at /Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/chat.test.ts:55:20

    Error Context: test-results/chat-chat-activity-stop-generation-during-submission-chat-retry1/error-context.md

    attachment #2: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/chat-chat-activity-stop-generation-during-submission-chat-retry1/trace.zip
    Usage:

        pnpm exec playwright show-trace test-results/chat-chat-activity-stop-generation-during-submission-chat-retry1/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


[1A[2K  7) [chat] â€º tests/chat.test.ts:61:7 â€º chat activity â€º edit user message and resubmit â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.click: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for locator('[data-testid="multimodal-input"]').locator('textarea, [contenteditable="true"]').first()[22m


       at pages/chat.ts:32

      30 |     // Find the actual textarea/input inside the multimodal input
      31 |     const textInput = this.page.locator('[data-testid="multimodal-input"]').locator('textarea, [contenteditable="true"]').first();
    > 32 |     await textInput.click();
         |                     ^
      33 |     await textInput.fill(message);
      34 |     
      35 |     // Wait for the button to exist (either send-button or stop-button)
        at ChatPage.sendUserMessage (/Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/pages/chat.ts:32:21)
        at /Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/chat.test.ts:62:20

    Error Context: test-results/chat-chat-activity-edit-user-message-and-resubmit-chat/error-context.md

    Retry #1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.click: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for locator('[data-testid="multimodal-input"]').locator('textarea, [contenteditable="true"]').first()[22m


       at pages/chat.ts:32

      30 |     // Find the actual textarea/input inside the multimodal input
      31 |     const textInput = this.page.locator('[data-testid="multimodal-input"]').locator('textarea, [contenteditable="true"]').first();
    > 32 |     await textInput.click();
         |                     ^
      33 |     await textInput.fill(message);
      34 |     
      35 |     // Wait for the button to exist (either send-button or stop-button)
        at ChatPage.sendUserMessage (/Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/pages/chat.ts:32:21)
        at /Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/chat.test.ts:62:20

    Error Context: test-results/chat-chat-activity-edit-user-message-and-resubmit-chat-retry1/error-context.md

    attachment #2: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/chat-chat-activity-edit-user-message-and-resubmit-chat-retry1/trace.zip
    Usage:

        pnpm exec playwright show-trace test-results/chat-chat-activity-edit-user-message-and-resubmit-chat-retry1/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


[1A[2K[20/20] [chat] â€º tests/chat.test.ts:112:7 â€º chat activity â€º upvote message
[1A[2K[21/20] (retries) [chat] â€º tests/chat.test.ts:121:7 â€º chat activity â€º downvote message
[1A[2K[chat] â€º tests/chat.test.ts:112:7 â€º chat activity â€º upvote message
â³ Connecting to test database...

[1A[2Kâ³ Running test database migrations...

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P06'[39m,
  message: [32m'schema "drizzle" already exists, skipping'[39m,
  file: [32m'schemacmds.c'[39m,
  line: [32m'132'[39m,
  routine: [32m'CreateSchemaCommand'[39m
}

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P07'[39m,
  message: [32m'relation "__drizzle_migrations" already exists, skipping'[39m,
  file: [32m'parse_utilcmd.c'[39m,
  line: [32m'207'[39m,
  routine: [32m'transformCreateStmt'[39m
}

[1A[2Kâœ… Test migrations completed in 17ms

[1A[2K[chat] â€º tests/chat.test.ts:121:7 â€º chat activity â€º downvote message
â³ Connecting to test database...

[1A[2Kâ³ Running test database migrations...

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P06'[39m,
  message: [32m'schema "drizzle" already exists, skipping'[39m,
  file: [32m'schemacmds.c'[39m,
  line: [32m'132'[39m,
  routine: [32m'CreateSchemaCommand'[39m
}

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P07'[39m,
  message: [32m'relation "__drizzle_migrations" already exists, skipping'[39m,
  file: [32m'parse_utilcmd.c'[39m,
  line: [32m'207'[39m,
  routine: [32m'transformCreateStmt'[39m
}

[1A[2Kâœ… Test migrations completed in 14ms

[1A[2K  8) [chat] â€º tests/chat.test.ts:83:7 â€º chat activity â€º upload file and send image attachment with message 

    [31mTest timeout of 60000ms exceeded.[39m

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m()[22m failed

    Locator:  getByTestId('attachments-preview')
    Expected: visible
    Received: <element(s) not found>

    Call log:
    [2m  - Expect "toBeVisible" with timeout 60000ms[22m
    [2m  - waiting for getByTestId('attachments-preview')[22m


       at pages/chat.ts:102

      100 |
      101 |   async isElementVisible(elementId: string) {
    > 102 |     await expect(this.page.getByTestId(elementId)).toBeVisible();
          |                                                    ^
      103 |   }
      104 |
      105 |   async isElementNotVisible(elementId: string) {
        at ChatPage.isElementVisible (/Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/pages/chat.ts:102:52)
        at /Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/chat.test.ts:86:20

    Error Context: test-results/chat-chat-activity-upload--0ecb3-age-attachment-with-message-chat/error-context.md

    Retry #1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    [31mTest timeout of 60000ms exceeded.[39m

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m()[22m failed

    Locator:  getByTestId('attachments-preview')
    Expected: visible
    Received: <element(s) not found>

    Call log:
    [2m  - Expect "toBeVisible" with timeout 60000ms[22m
    [2m  - waiting for getByTestId('attachments-preview')[22m


       at pages/chat.ts:102

      100 |
      101 |   async isElementVisible(elementId: string) {
    > 102 |     await expect(this.page.getByTestId(elementId)).toBeVisible();
          |                                                    ^
      103 |   }
      104 |
      105 |   async isElementNotVisible(elementId: string) {
        at ChatPage.isElementVisible (/Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/pages/chat.ts:102:52)
        at /Users/cortex-air/conductor/ai-base-chat/.conductor/remove-all-test-issues/tests/chat.test.ts:86:20

    Error Context: test-results/chat-chat-activity-upload--0ecb3-age-attachment-with-message-chat-retry1/error-context.md

    attachment #2: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/chat-chat-activity-upload--0ecb3-age-attachment-with-message-chat-retry1/trace.zip
    Usage:

        pnpm exec playwright show-trace test-results/chat-chat-activity-upload--0ecb3-age-attachment-with-message-chat-retry1/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


[1A[2K[22/20] (retries) [chat] â€º tests/chat.test.ts:130:7 â€º chat activity â€º update vote
[1A[2K[chat] â€º tests/chat.test.ts:130:7 â€º chat activity â€º update vote
â³ Connecting to test database...

[1A[2Kâ³ Running test database migrations...

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P06'[39m,
  message: [32m'schema "drizzle" already exists, skipping'[39m,
  file: [32m'schemacmds.c'[39m,
  line: [32m'132'[39m,
  routine: [32m'CreateSchemaCommand'[39m
}

[1A[2K{
  severity_local: [32m'NOTICE'[39m,
  severity: [32m'NOTICE'[39m,
  code: [32m'42P07'[39m,
  message: [32m'relation "__drizzle_migrations" already exists, skipping'[39m,
  file: [32m'parse_utilcmd.c'[39m,
  line: [32m'207'[39m,
  routine: [32m'transformCreateStmt'[39m
}

[1A[2Kâœ… Test migrations completed in 11ms

